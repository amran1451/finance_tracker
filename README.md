# FinTrack – офлайн-трекер бюджета

FinTrack — мобильное Flutter-приложение для контроля личных финансов. Оно работает офлайн, хранит данные в локальной SQLite (drift) и поддерживает планирование периодов, плановые и неплановые траты, фильтрацию и аналитику по критичности.

## Основные возможности

- **Онбординг и сид-данные:** при первом запуске создаются счета, категории, критичности, период и демонстрационные транзакции.
- **Домашний экран:** Safe-to-Spend, карточка «План vs Факт vs Неплан», мини-срез по критичности, быстрые действия и переход к плану.
- **Быстрый ввод:** кастомная цифровая клавиатура с «+100/500/1000» и поддержкой `k`, чипы последних критичностей, создание плановых/неплановых трат, доходов и переводов.
- **План периода:** список плановых расходов, прогресс оплаты, перенос в следующий период, редактирование и удаление.
- **Транзакции:** лента с фильтрами (период, счёт, категория, тип, план/не план, критичность), экспорт CSV и карточка редактирования.
- **Настройки:** CRUD для счетов, категорий, периодов и справочника критичности с drag-sort, архивацией и проверкой связей.
- **Материальные темы:** Material 3, светлая/тёмная тема, плавные анимации и доступные размеры элементов.

## Стек и архитектура

- Flutter 3, Riverpod (hooks_riverpod), go_router
- Drift + sqlite3_flutter_libs + миграции
- Material 3, FlexColorScheme
- Архитектура: data (drift + репозитории) → features (презентация) → routing/app.dart

## Сборка и запуск

```bash
flutter pub get
dart run build_runner build --delete-conflicting-outputs
flutter run
```

Для генерации apk: `flutter build apk`.

## Структура проекта

```
lib/
  app.dart
  main.dart
  core/
    theme/
    utils/
  data/
    db/
    models/
    repositories/
  features/
    common/
    home/
    plan/
    quick_entry/
    settings/
    transactions/
  routing/
```

## База данных и сид-данные

- Файл БД: `finvault.sqlite` в каталоге документов приложения.
- Сид-данные: 2 счёта (наличные и карта), категории расходов/доходов, 6 критичностей, активный период (−7/+7 дней), 4 плановых расхода и 12 транзакций.
- Транзакции хранят суммы в копейках, тип (`expense`/`income`/`transfer`), плановую привязку и справочник критичности.

## Экспорт CSV

На экране «Транзакции» доступна кнопка экспорта. Формируется файл `transactions_<periodId>.csv` в каталоге документов с колонками: `id, datetime, amount, account, type, category, plan, criticality, note`. После успешного экспорта появляется snackbar с путём.

## Тесты

Минимальные unit-тесты покрывают:

- пересчёт прогресса плановой траты при добавлении транзакций;
- учёт транзакций только внутри периода в отчёте Safe-to-Spend;
- фильтрацию журнала по критичности.

Запуск:

```bash
flutter test
```

## Скриншоты (плейсхолдеры)

- `assets/images/home_placeholder.png`
- `assets/images/transactions_placeholder.png`
- `assets/images/settings_placeholder.png`
